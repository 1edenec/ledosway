### AUTOSTART APPS

### Idle configuration
#$1 - timeout to lock
#$2 - timeout to screen of
#exec_always ~/.config/sway/scripts/swayidle.sh 300 300


# Clamshell Mode
set $laptop eDP-1
bindswitch --reload --locked lid:on output $laptop disable
bindswitch --reload --locked lid:off output $laptop enable


# GTK3 applications take a long time to start
exec systemctl --user import-environment DISPLAY WAYLAND_DISPLAY SWAYSOCK
exec hash dbus-update-activation-environment 2>/dev/null && \
     dbus-update-activation-environment --systemd DISPLAY WAYLAND_DISPLAY SWAYSOCK


# if-exists autostarts
#
exec {
    '[ -x "$(command -v autotiling)" ] && autotiling'
}

exec_always {
	# start foot server
	#'[ ! -f /run/user/1000/foot-wayland-1.sock ] && foot -s'

	# start flashfocus
	'[ -x "$(command -v flashfocus)" ] && killall flashfocus ; flashfocus'

	# fix to dunst when session of sway was restarted
	'[ -x "$(command -v dunst)" ] && pkill dunst'
	# polkit from lxsession-gtk3
	'[ -x "$(command -v lxpolkit)" ] && pkill lxpolkit; lxpolkit'
}


#
# Status Bar:
#
# Read `man 5 sway-bar` for more information about this section.
bar {
	swaybar_command waybar
}


